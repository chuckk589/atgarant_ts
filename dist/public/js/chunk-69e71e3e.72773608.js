(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-69e71e3e"],{"03f2":function(e,t){(function(){var e={},t="";try{t=location.hash.toString()}catch(m){}var n,r=a(t),o=!1;try{if(o=null!=window.parent&&window!=window.parent,o){window.addEventListener("message",(function(e){if(e.source===window.parent){try{var t=JSON.parse(e.data)}catch(m){return}t&&t.eventType&&("set_custom_style"==t.eventType?n.innerHTML=t.eventData:u(t.eventType,t.eventData))}})),n=document.createElement("style"),document.head.appendChild(n);try{window.parent.postMessage(JSON.stringify({eventType:"iframe_ready"}),"*")}catch(m){}}}catch(m){}function i(e){try{return e=e.replace(/\+/g,"%20"),decodeURIComponent(e)}catch(m){return e}}function a(e){e=e.replace(/^#/,"");var t={};if(!e.length)return t;if(e.indexOf("=")<0&&e.indexOf("?")<0)return t._path=i(e),t;var n=e.indexOf("?");if(n>=0){var r=e.substr(0,n);t._path=i(r),e=e.substr(n+1)}var o=s(e);for(var a in o)t[a]=o[a];return t}function s(e){var t={};if(!e.length)return t;var n,r,o,a,s=e.split("&");for(n=0;n<s.length;n++)r=s[n].split("="),o=i(r[0]),a=null==r[1]?null:i(r[1]),t[o]=a;return t}function l(e,t){var n=e.indexOf("#");if(n<0)return e+"#"+t;var r=e.substr(n+1);return r.indexOf("=")>=0||r.indexOf("?")>=0?e+"&"+t:r.length>0?e+"?"+t:e+t}function c(e,t,n){if(t||(t=function(){}),void 0===n&&(n=""),void 0!==window.TelegramWebviewProxy)TelegramWebviewProxy.postEvent(e,JSON.stringify(n)),t();else if(window.external&&"notify"in window.external)window.external.notify(JSON.stringify({eventType:e,eventData:n})),t();else if(o)try{var i="https://web.telegram.org";i="*",window.parent.postMessage(JSON.stringify({eventType:e,eventData:n}),i),r.tgWebAppDebug&&console.log("[Telegram.WebView] postEvent via postMessage",e,n),t()}catch(m){t(m)}else r.tgWebAppDebug&&console.log("[Telegram.WebView] postEvent",e,n),t({notAvailable:!0})}function u(e,t){p(e,(function(n){n(e,t)}))}function p(t,n){var r=e[t];if(void 0!==r&&r.length)for(var o=0;o<r.length;o++)try{n(r[o])}catch(m){}}function d(t,n){void 0===e[t]&&(e[t]=[]);var r=e[t].indexOf(n);-1===r&&e[t].push(n)}function f(t,n){if(void 0!==e[t]){var r=e[t].indexOf(n);-1!==r&&e[t].splice(r,1)}}window.Telegram||(window.Telegram={}),window.Telegram.WebView={initParams:r,isIframe:o,onEvent:d,offEvent:f,postEvent:c,receiveEvent:u,callEventCallbacks:p},window.Telegram.Utils={urlSafeDecode:i,urlParseQueryString:s,urlParseHashParams:a,urlAppendHashParams:l},window.TelegramGameProxy_receiveEvent=u,window.TelegramGameProxy={receiveEvent:u}})(),function(){var e=window.Telegram.Utils,t=window.Telegram.WebView,n=t.initParams,r=t.isIframe,o={},i="",a={},s={},l="light",c="6.0";if(n.tgWebAppData&&n.tgWebAppData.length)for(var u in i=n.tgWebAppData,a=e.urlParseQueryString(i),a){var p=a[u];try{("{"==p.substr(0,1)&&"}"==p.substr(-1)||"["==p.substr(0,1)&&"]"==p.substr(-1))&&(a[u]=JSON.parse(p))}catch(j){}}if(n.tgWebAppThemeParams&&n.tgWebAppThemeParams.length){var d=n.tgWebAppThemeParams;try{var f=JSON.parse(d);C(f)}catch(j){}}function m(e,t){t.theme_params&&(C(t.theme_params),window.Telegram.WebApp.MainButton.setParams({force_update:!0}),w("themeChanged"))}n.tgWebAppVersion&&(c=n.tgWebAppVersion);var g=window.innerHeight;function v(e,t){t.height&&(window.removeEventListener("resize",h),P(t))}function h(e){g!=window.innerHeight&&(g=window.innerHeight,w("viewportChanged",{isStateStable:!0}))}function b(e){if(!e.metaKey&&!e.ctrlKey){var t=e.target;while("A"!=t.tagName&&t.parentNode)t=t.parentNode;"A"!=t.tagName||"_blank"==t.target||"http:"!=t.protocol&&"https:"!=t.protocol||"t.me"!=t.hostname||(o.openTgLink(t.href),e.preventDefault())}}function w(e){var n=Array.prototype.slice.call(arguments);e=n.shift(),t.callEventCallbacks("webview:"+e,(function(e){e.apply(o,n)}))}function y(e,n){t.onEvent("webview:"+e,n)}function _(e,n){t.offEvent("webview:"+e,n)}function x(e,t){var n=document.documentElement;n&&n.style&&n.style.setProperty&&n.style.setProperty("--tg-"+e,t)}function C(e){var t;for(var n in e)(t=T(e[n]))&&(s[n]=t,"bg_color"==n&&(l=W(t)?"dark":"light",x("color-scheme",l)),n="theme-"+n.split("_").join("-"),x(n,t))}var D=!1,E=!1,A=!0;function P(e){var t,n;"undefined"!==typeof e&&(A=!!e.is_expanded,D=e.height,e.is_state_stable&&(E=e.height),w("viewportChanged",{isStateStable:!!e.is_state_stable})),t=!1!==D?D-M+"px":M?"calc(100vh - "+M+"px)":"100vh",n=!1!==E?E-M+"px":M?"calc(100vh - "+M+"px)":"100vh",x("viewport-height",t),x("viewport-stable-height",n)}function T(e){var t;return e+="",/^#([0-9a-f]){6}$/i.test(e)?e.toLowerCase():!!(t=/^#([0-9a-f])([0-9a-f])([0-9a-f])$/i.exec(e))&&("#"+t[1]+t[1]+t[2]+t[2]+t[3]+t[3]).toLowerCase()}function W(e){e=e.replace(/[\s#]/g,""),3==e.length&&(e=e[0]+e[0]+e[1]+e[1]+e[2]+e[2]);var t=parseInt(e.substr(0,2),16),n=parseInt(e.substr(2,2),16),r=parseInt(e.substr(4,2),16),o=Math.sqrt(t*t*.299+n*n*.587+r*r*.114);return o<120}function S(e,t){"string"!==typeof e&&(e=""),"string"!==typeof t&&(t=""),e=e.replace(/^\s+|\s+$/g,"").split("."),t=t.replace(/^\s+|\s+$/g,"").split(".");var n,r,o,i=Math.max(e.length,t.length);for(n=0;n<i;n++)if(r=parseInt(e[n])||0,o=parseInt(t[n])||0,r!=o)return r>o?1:-1;return 0}function I(e){return S(c,e)>=0}function k(e){if(window.Blob)try{return new Blob([e]).size}catch(j){}for(var t=e.length,n=e.length-1;n>=0;n--){var r=e.charCodeAt(n);r>127&&r<=2047?t++:r>2047&&r<=65535&&(t+=2),r>=56320&&r<=57343&&n--}return t}var M=0,O=function(){var e=!1,r=!0,o=!1,i="CONTINUE",a=!1,l=!1,c={};Object.defineProperty(c,"text",{set:function(e){c.setParams({text:e})},get:function(){return i},enumerable:!0}),Object.defineProperty(c,"color",{set:function(e){c.setParams({color:e})},get:function(){return a||s.button_color||"#2481cc"},enumerable:!0}),Object.defineProperty(c,"textColor",{set:function(e){c.setParams({text_color:e})},get:function(){return l||s.button_text_color||"#ffffff"},enumerable:!0}),Object.defineProperty(c,"isVisible",{set:function(e){c.setParams({is_visible:e})},get:function(){return e},enumerable:!0}),Object.defineProperty(c,"isProgressVisible",{get:function(){return o},enumerable:!0}),Object.defineProperty(c,"isActive",{set:function(e){c.setParams({is_active:e})},get:function(){return r},enumerable:!0});var u=null;t.onEvent("main_button_pressed",m);var p=null,d={};if(n.tgWebAppDebug){for(var f in p=document.createElement("tg-main-button"),d={font:"600 14px/18px sans-serif",display:"none",width:"100%",height:"48px",borderRadius:"0",background:"no-repeat right center",position:"fixed",left:"0",right:"0",bottom:"0",margin:"0",padding:"15px 20px",textAlign:"center",boxSizing:"border-box",zIndex:"10000"},d)p.style[f]=d[f];document.addEventListener("DOMContentLoaded",(function e(t){document.removeEventListener("DOMContentLoaded",e),document.body.appendChild(p),p.addEventListener("click",m,!1)}))}function m(){r&&w("mainButtonClicked")}function g(){var t=c.color,n=c.textColor;return e?{is_visible:!0,is_active:r,is_progress_visible:o,text:i,color:t,text_color:n}:{is_visible:!1}}function v(e){return"undefined"===typeof e&&(e=g()),JSON.stringify(e)}function h(){var e=g(),r=v(e);u!==r&&(u=r,t.postEvent("web_app_setup_main_button",!1,e),n.tgWebAppDebug&&b(e))}function b(e){e.is_visible?(p.style.display="block",M=48,p.style.opacity=e.is_active?"1":"0.8",p.style.cursor=e.is_active?"pointer":"auto",p.disabled=!e.is_active,p.innerText=e.text,p.style.backgroundImage=e.is_progress_visible?"url('data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%20viewport%3D%220%200%2048%2048%22%20width%3D%2248px%22%20height%3D%2248px%22%3E%3Ccircle%20cx%3D%2250%25%22%20cy%3D%2250%25%22%20stroke%3D%22%23fff%22%20stroke-width%3D%222.25%22%20stroke-linecap%3D%22round%22%20fill%3D%22none%22%20stroke-dashoffset%3D%22106%22%20r%3D%229%22%20stroke-dasharray%3D%2256.52%22%20rotate%3D%22-90%22%3E%3Canimate%20attributeName%3D%22stroke-dashoffset%22%20attributeType%3D%22XML%22%20dur%3D%22360s%22%20from%3D%220%22%20to%3D%2212500%22%20repeatCount%3D%22indefinite%22%3E%3C%2Fanimate%3E%3CanimateTransform%20attributeName%3D%22transform%22%20attributeType%3D%22XML%22%20type%3D%22rotate%22%20dur%3D%221s%22%20from%3D%22-90%2024%2024%22%20to%3D%22630%2024%2024%22%20repeatCount%3D%22indefinite%22%3E%3C%2FanimateTransform%3E%3C%2Fcircle%3E%3C%2Fsvg%3E')":"none",p.style.backgroundColor=e.color,p.style.color=e.text_color):(p.style.display="none",M=0),document.documentElement&&(document.documentElement.style.boxSizing="border-box",document.documentElement.style.paddingBottom=M+"px"),P()}function x(t){if("undefined"!==typeof t.text){var n=t.text.toString().replace(/^\s+|\s+$/g,"");if(!n.length)throw console.error("[Telegram.WebApp] Main button text is required",t.text),Error("WebAppMainButtonParamInvalid");if(n.length>64)throw console.error("[Telegram.WebApp] Main button text is too long",n),Error("WebAppMainButtonParamInvalid");i=n}if("undefined"!==typeof t.color)if(!1===t.color||null===t.color)a=!1;else{var o=T(t.color);if(!o)throw console.error("[Telegram.WebApp] Main button color format is invalid",o),Error("WebAppMainButtonParamInvalid");a=o}if("undefined"!==typeof t.text_color)if(!1===t.text_color||null===t.text_color)l=!1;else{var s=T(t.text_color);if(!s)throw console.error("[Telegram.WebApp] Main button text color format is invalid",s),Error("WebAppMainButtonParamInvalid");l=s}if("undefined"!==typeof t.is_visible){if(t.is_visible&&!c.text.length)throw console.error("[Telegram.WebApp] Main button text is required"),Error("WebAppMainButtonParamInvalid");e=!!t.is_visible}return"undefined"!==typeof t.is_active&&(r=!!t.is_active),h(),c}return c.setText=function(e){return c.setParams({text:e})},c.onClick=function(e){return y("mainButtonClicked",e),c},c.offClick=function(e){return _("mainButtonClicked",e),c},c.show=function(){return c.setParams({is_visible:!0})},c.hide=function(){return c.setParams({is_visible:!1})},c.enable=function(){return c.setParams({is_active:!0})},c.disable=function(){return c.setParams({is_active:!1})},c.showProgress=function(e){return r=!!e,o=!0,h(),c},c.hideProgress=function(){return c.isActive||(r=!0),o=!1,h(),c},c.setParams=x,c}(),V={};function L(e,t){if(t.slug&&V[t.slug]){var n=V[t.slug];delete V[t.slug],n.callback&&n.callback(t.status),w("invoiceClosed",{url:n.url,status:t.status})}}window.Telegram||(window.Telegram={}),Object.defineProperty(o,"initData",{get:function(){return i},enumerable:!0}),Object.defineProperty(o,"initDataUnsafe",{get:function(){return a},enumerable:!0}),Object.defineProperty(o,"version",{get:function(){return c},enumerable:!0}),Object.defineProperty(o,"colorScheme",{get:function(){return l},enumerable:!0}),Object.defineProperty(o,"themeParams",{get:function(){return s},enumerable:!0}),Object.defineProperty(o,"isExpanded",{get:function(){return A},enumerable:!0}),Object.defineProperty(o,"viewportHeight",{get:function(){return(!1===D?window.innerHeight:D)-M},enumerable:!0}),Object.defineProperty(o,"viewportStableHeight",{get:function(){return(!1===E?window.innerHeight:E)-M},enumerable:!0}),Object.defineProperty(o,"MainButton",{value:O,enumerable:!0}),o.isVersionAtLeast=function(e){return I(e)},o.onEvent=function(e,t){y(e,t)},o.offEvent=function(e,t){_(e,t)},o.sendData=function(e){if(!e||!e.length)throw console.error("[Telegram.WebApp] Data is required",e),Error("WebAppDataInvalid");if(k(e)>4096)throw console.error("[Telegram.WebApp] Data is too long",e),Error("WebAppDataInvalid");t.postEvent("web_app_data_send",!1,{data:e})},o.openTelegramLink=function(e){var n=document.createElement("A");if(n.href=e,"http:"!=n.protocol&&"https:"!=n.protocol)throw console.error("[Telegram.WebApp] Url protocol is not supported",e),Error("WebAppTgUrlInvalid");if("t.me"!=n.hostname)throw console.error("[Telegram.WebApp] Url host is not supported",e),Error("WebAppTgUrlInvalid");var o=n.pathname+n.search;r||I("1.1")?t.postEvent("web_app_open_tg_link",!1,{path_full:o}):location.href="https://t.me"+o},o.openInvoice=function(e,n){var r,o,i=document.createElement("A");if(i.href=e,"http:"!=i.protocol&&"https:"!=i.protocol||"t.me"!=i.hostname||!(r=i.pathname.match(/^\/(\$|invoice\/)([A-Za-z0-9\-_=]+)$/))||!(o=r[2]))throw console.error("[Telegram.WebApp] Invoice url is invalid",e),Error("WebAppInvoiceUrlInvalid");if(!I("1.1"))throw console.error("[Telegram.WebApp] Method openInvoice is not supported in version "+c),Error("WebAppMethodUnsupported");if(V[o])throw console.error("[Telegram.WebApp] Invoice is already opened"),Error("WebAppInvoiceOpened");V[o]={url:e,callback:n},t.postEvent("web_app_open_invoice",!1,{slug:o})},o.ready=function(){t.postEvent("web_app_ready")},o.expand=function(){t.postEvent("web_app_expand")},o.close=function(){t.postEvent("web_app_close")},window.Telegram.WebApp=o,P(),window.addEventListener("resize",h),r&&document.addEventListener("click",b),t.onEvent("theme_changed",m),t.onEvent("viewport_changed",v),t.onEvent("invoice_closed",L),t.postEvent("web_app_request_theme"),t.postEvent("web_app_request_viewport")}()},c4be:function(e,t,n){},c8aa:function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("CCard",[n("CCardHeader",[n("strong",[e._v("Новая сделка ")])]),n("CCardBody",[n("CRow",[n("CCol",{staticClass:"form-group",attrs:{sm:"12"}},[n("vue-autosuggest",{attrs:{suggestions:e.partnerVariants,renderSuggestion:e.renderSuggestion,getSuggestionValue:e.getSuggestionValue,"input-props":{class:["form-control"],id:"autosuggest__input",placeholder:"Начните вбивать никнейм или id"}},on:{selected:e.onSelected,input:e.fetchResults}})],1)],1),n("CRow",[n("CCol",{attrs:{sm:"12"}},[n("CSelect",{attrs:{prepend:"Кто оплачивает комиссию?",value:e.feePayer,options:[{label:"Покупатель",value:"buyer"},{label:"Продавец",value:"seller"}]},on:{"update:value":function(t){e.feePayer=t}}})],1)],1),n("CRow",[n("CCol",{attrs:{sm:"12"}},[n("CSelect",{attrs:{prepend:"Способ оплаты",value:e.paymentMethodId,options:e.paymentMethods},on:{"update:value":function(t){e.paymentMethodId=t}}}),n("CAlert",{staticClass:"d-flex align-items-center",staticStyle:{height:"10px","font-size":"12px"},attrs:{color:"primary"}},[e._v(" "+e._s(e.pmString)+" ")])],1)],1),n("CRow",[n("CCol",{attrs:{sm:"4"}},[n("CInput",{attrs:{type:"number",min:"0",prepend:"Сумма сделки"},model:{value:e.offerValue,callback:function(t){e.offerValue=t},expression:"offerValue"}}),e.offerValue?n("CAlert",{staticClass:"d-flex align-items-center",staticStyle:{height:"10px","font-size":"12px"},attrs:{color:"primary"}},[e._v(" "+e._s(e.feeString)+" ")]):e._e()],1)],1),n("CRow",[n("CCol",{attrs:{sm:"4"}},[n("CInput",{attrs:{type:"date",prepend:"Дата доставки"},model:{value:e.estimatedShipping,callback:function(t){e.estimatedShipping=t},expression:"estimatedShipping"}})],1),n("CCol",{attrs:{sm:"4"}},[n("CInput",{attrs:{type:"date",prepend:"Последняя дата возврата"},model:{value:e.refundDetails,callback:function(t){e.refundDetails=t},expression:"refundDetails"}})],1)],1),n("CRow",[n("CCol",{attrs:{sm:"4"}},[n("CTextarea",{attrs:{label:"Детали"},model:{value:e.productDetails,callback:function(t){e.productDetails=t},expression:"productDetails"}})],1)],1),n("CRow",[n("CCol",{attrs:{sm:"4"}},[n("CTextarea",{attrs:{label:"Способ передачи товара"},model:{value:e.shippingDetails,callback:function(t){e.shippingDetails=t},expression:"shippingDetails"}})],1)],1),n("CRow",[n("CCol",{attrs:{sm:"4"}},[n("CTextarea",{attrs:{label:"Дополнительная информация"},model:{value:e.productAdditionalDetails,callback:function(t){e.productAdditionalDetails=t},expression:"productAdditionalDetails"}})],1)],1),n("CRow",[n("CCol",{attrs:{sm:"4"}},[n("CTextarea",{attrs:{label:"Прочее"},model:{value:e.restDetails,callback:function(t){e.restDetails=t},expression:"restDetails"}})],1)],1)],1),n("CCardFooter",[n("CLoadingButton",{staticStyle:{"margin-right":"5px"},attrs:{"disabled-on-loading":"",size:"sm",shape:"square",color:"primary"}},[e._v(" Сохранить и отправить ")]),n("CLoadingButton",{attrs:{"disabled-on-loading":"",shape:"square",size:"sm",color:"danger"},nativeOn:{click:function(t){return e.drop()}}},[e._v(" Сбросить ")])],1)],1)},o=[],i=(n("03f2"),{name:"WebApp",data:function(){return{query:"",partnerVariants:[],feePayer:"buyer",offerValue:"",paymentMethodId:"",estimatedShipping:"",refundDetails:"",productDetails:"",shippingDetails:"",productAdditionalDetails:"",restDetails:"",paymentMethods:[],partnerId:""}},created:function(){var e=this;this.$http({method:"GET",url:"/v1/webapp/configs"}).then((function(t){e.paymentMethods=t.data,e.paymentMethodId=t.data[0].value}))},mounted:function(){},methods:{fetchResults:function(e){var t=this;this.$http({method:"GET",url:"/v1/webapp/user?partial=".concat(e)}).then((function(e){t.partnerVariants=[{data:e.data}]}))},onSelected:function(e){this.partnerId=e.item.id},getSuggestionValue:function(e){return e.item.username||e.item.chatId},renderSuggestion:function(e){return"".concat(e.item.username||e.item.chatId," ").concat(+e.item.offers," сделок, ").concat(+e.item.violations," нарушений")},drop:function(){this.feePayer="buyer",this.offerValue="",this.paymentMethodId=this.paymentMethods[0].value,this.estimatedShipping="",this.refundDetails="",this.productDetails="",this.shippingDetails="",this.productAdditionalDetails="",this.restDetails=""},getPmCode:function(e){return"Банковская карта"==e.label||"QIWI"==e.label?"Руб":e.label}},computed:{feeString:function(){var e=this,t=this.paymentMethods.find((function(t){return t.value===e.paymentMethodId}));return"Размер комиссии: ".concat(Math.max(this.offerValue*t.feePercent/100,t.feeRaw)," ").concat(this.getPmCode(t))},pmString:function(){var e=this,t=this.paymentMethods.find((function(t){return t.value==e.paymentMethodId})),n=this.getPmCode(t);return t?"".concat(t.minSum," - ").concat(t.maxSum," ").concat(n,", комиссия ").concat(t.feeRaw," ").concat(n," или ").concat(t.feePercent,"%"):""}}}),a=i,s=(n("ffb4"),n("2877")),l=Object(s["a"])(a,r,o,!1,null,null,null);t["default"]=l.exports},ffb4:function(e,t,n){"use strict";n("c4be")}}]);
//# sourceMappingURL=chunk-69e71e3e.72773608.js.map